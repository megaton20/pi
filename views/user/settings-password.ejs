




<style>

    /* Form Inputs */
    .form-group {
        margin: 1rem 0;
        text-align: left;
    }

    .form-control {
        width: 100%;
        padding: 0.9rem;
        border-radius: 8px;
        border: none;
        background: rgba(255, 255, 255, 0.15);
        color: white;
        outline: none;
        font-size: 1rem;
        transition: 0.3s;
    }

    .form-control::placeholder {
        color: rgba(255, 255, 255, 0.6);
    }

    .form-control:focus {
        background: rgba(255, 255, 255, 0.25);
        border: 1px solid rgba(255, 255, 255, 0.3);
    }

    /* Login Button */
    .login-btn {
        width: 100%;
        padding: 0.9rem;
        border: none;
        border-radius: 8px;
        background: #6a5acd;
        color: white;
        font-size: 1rem;
        cursor: pointer;
        transition: 0.3s;
        font-weight: bold;
    }

    .login-btn:hover {
        background: #584dc5;
    }

    /* Social Login */
    .google-btn {
        width: 100%;
        padding: 0.9rem;
        border: none;
        border-radius: 8px;
        background: #db4437;
        color: white;
        font-size: 1rem;
        margin-top: 1rem;
        cursor: pointer;
        transition: 0.3s;
        font-weight: bold;
    }

    .google-btn:hover {
        background: #c1351d;
    }

    /* Footer Links */
    .footer-links {
        margin-top: 1.2rem;
        font-size: 0.9rem;
        color: rgba(255, 255, 255, 0.7);
    }

    .footer-links a {
        color: white;
        text-decoration: none;
        transition: 0.3s;
        font-weight: bold;
    }

    .footer-links a:hover {
        text-decoration: underline;
        color: #6a5acd;
    }

    /* Error Messages */
    .text-danger {
        color: #ff4b5c;
        font-size: 0.85rem;
        margin-top: 0.2rem;
    }
</style>

<div class="compact-container">
    <%- include ('../partials/messages') %>
    <div class="m-card">
        <form action="/user/change-password/" method="post" onsubmit="return validatePasswordForm()" >
            <div class="form-group">
                <input type="password" class="form-control" placeholder="Enter Old password" name="oldPassword" id="oldPassword">
                <div class="text-danger" id="passwordError"></div>
            </div>
            <div class="form-group">
                <input type="password" class="form-control" placeholder="Enter new password" name="newPasswordA"  id="newPasswordA">
                <div class="text-danger" id="newPasswordAError"></div>
            </div>
			<div class="form-group">
                <input type="password" class="form-control" placeholder="renter password" name="newPasswordB" id="newPasswordB">
                <div class="text-danger" id="newPasswordBError"></div>
            </div>
            
            <button class="login-btn" type="submit">Change Password</button>
        </form>

        <div class="footer-links">
            <p>Back to <a href="/user/profile">Dashboard</a></p>
        </div>
    </div>
</div>


	  
<script>
	function validatePasswordForm() {

	  let isValid = true;
  
	  // Clear previous errors
	  document.querySelectorAll(".text-danger").forEach(el => el.textContent = "");
  
	  // Old Password validation
	  const oldPassword = document.getElementById("oldPassword").value.trim();
	  if (!oldPassword) {
		document.getElementById("oldPasswordError").textContent = "Old password is required.";
		isValid = false;
	  }
  
	  // New Password validation
	  const newPasswordA = document.getElementById("newPasswordA").value;
	  const newPasswordB = document.getElementById("newPasswordB").value;
	  
	  if (!newPasswordA) {
		document.getElementById("newPasswordAError").textContent = "New password is required.";
		isValid = false;
	  } else if (newPasswordA.length < 4) {
		document.getElementById("newPasswordAError").textContent = "Password must be at least 4 characters long.";
		isValid = false;

	  }
  
	  // Confirm New Password validation
	  if (!newPasswordB) {
		document.getElementById("newPasswordBError").textContent = "Please repeat the new password.";
		isValid = false;
	  } else if (newPasswordA !== newPasswordB) {
		document.getElementById("newPasswordBError").textContent = "Passwords do not match.";
		isValid = false;
	  }
  
	  return isValid; // Form will submit if valid; otherwise, it won't.
	}
  </script>
		